# Джастин Эренхофер

_**Попытки повышения приватности Bitcoin: хорошие, плохие и ужасные**_

[https://youtu.be/0hEXXSkKS94](https://youtu.be/0hEXXSkKS94)

---

_**Даг:**_ Начнём с лёгкого обсуждения темы приватности Bitcoin. Да, я говорю с долей сарказма. Не думаю, что беседа будет лёгкой. Но и сложной тоже не будет. Итак, сейчас выступит Джастин Эрхоффер. В течение последних полутора дней вы уже не раз видели его. Весь сегодняшний день посвящён проектам, непосредственно связанным с технологиями обеспечения приватности. И мы начнём с технологии обеспечения приватности Bitcoin. Давай, Джастин, забирай микрофон. Выходи на сцену. Спасибо, дружище. Как самочувствие?

_**Джастин:**_ Отлично, всё просто отлично. Я лёг спать только в одиннадцать, так что...

_**Даг:**_ Вот как! Хотел бы я сказать то же самое. Ладно, начинайте, коллега.

_**Джастин:**_ Отлично. Спасибо всем, кто пришёл. Итак, я действительно не собираюсь углубляться в детали. В основном мы поговорим о высокоуровневых подходах Bitcoin к обеспечению приватности, преимущественно об их связи с графами транзакций (это в большей степени связано с кольцевыми подписями Monero), а также о скрытых адресах, о сокрытии адресов — в Monero они так и называются «скрытыми адресами». И мы подойдём к теме с точки зрения человека уже немного знакомого с Monero. То есть мы не станем раскрывать проблему приватности Bitcoin с нуля. Это выступление предназначено для аудитории, которая уже знакома с Monero и хочет ещё раз узнать о том, что делается в этом плане со стороны Bitcoin — каковы преимущества, каковы некоторые из новых подходов, некоторые из последних разработок, и какие основные проблемы по-прежнему существуют у Bitcoin.

Итак, мы остановимся на нескольких моментах. Прежде всего, рассмотрим варианты реализации кольцевой подписи, такие как смешивание Samurai Whirlpool, WabiSabi, смешивание JointMarket, спасибо Деверику за то, что посоветовал мне включить этот вариант, PayJoin, а также некоторые способы использования скрытых адресов, такие как BIP-47 и Silent Payments. Мы не станем говорить о приватных платежах, поскольку они находятся где-то посередине, и у меня не было времени, чтобы в необходимой мере проработать все варианты их использования.

Здесь очень важно отметить, что обеспечение приватности подразумевает наличие множества составляющих. Поэтому, если кто-то говорит: «Смотрите, я нашёл очень, очень крутой способ обеспечения приватности, решающий это конкретное ограничение, связанное с приватностью Bitcoin! Ура!» — даже если этот способ будет отлично работать в отдельно взятом случае, это вовсе не значит, что данный приватный режим будет полноценным. Безусловно, сам по себе протокол Monero не обеспечивает полноценной приватности — вам приходится думать о том, как вы его используете, когда вы его используете, с кем вы взаимодействуете. А в случае с Bitcoin это ещё важнее. Поэтому запросто может существовать какой-то вариант реализации, который действительно будет хорошо решать такие проблемы, как взлом графа транзакций Bitcoin, но он совсем не обязательно позволит предотвратить банальное раскрытие баланса вашего кошелька при совершении платежей. Некоторые проблемы просто невозможно преодолеть, а решение иных требует дополнительных усилий или дополнительных инструментов, часто используемых вместе, чтобы смягчить возможные последствия.

Так что, отдельно взятый инструмент, обеспечивающий приватность, особенно в случае с Bitcoin, почти никогда не является комплексным решением этой проблемы. Это почти то же самое, о чём говорит Аарон в своих многочисленных выступлениях по криптографии. То, что вами были реализованы определённые типы криптографических механизмов, ещё не означает, что был создан протокол транзакций. Все эти вещи должны быть связаны друг с другом. И фактическая реализация и то, что вы на самом деле делаете со стороны Bitcoin, сильно отличается от того, что написано в криптографических документах Bitcoin.

Итак, начнём с описания некоторых вещей, связанных со смешиванием. Первым рассмотрим механизм смешивания Samurai Whirlpool. Кто из вас знаком со смешиванием Samurai Whirlpool? Несколько человек. Итак, Samurai использует довольно простой и понятный сервис смешивания, что, собственно, и является одним из его основных преимуществ. При этом в процессе используются собственные серверы Samurai. То есть, чтобы координировать смешивание между участниками, приходится полагаться на их сервер. Также они практикуют деноминацию, что объясняет наличие пулов разного размера. Чтобы попасть в пул, необходимо разбить свой Bitcoin, например, на сумму 0,1 BTC. В одном смешивании может принять участие только пять пользователей, в том числе и те, кто производит повторное смешивание. Одно из преимуществ этой системы заключается в том, что она проста и понятна. Вы знаете, что собираетесь сделать, и будете принимать участие в последующих раундах смешивания. При этом координатор Samurai Wallet взимает плату за ваше участие в пуле. В первый раз смешивание производится бесплатно, но за повторное участие уже взимается плата.

Затем следует смешивание WabiSabi. Это последнее обновление Wasabi Wallet с точки зрения работы механизма смешивания. И, насколько я помню, кошелёк Wasabi популярнее кошелька Samurai, если судить по проходящему чрез них объёму Bitcoin. И этот кошелёк значительнее гибок. С ним можно делать гораздо больше вещей. Так, в пул можно войти, обладая 10 входами. Это может быть даже 1 вход — в принципе, практически любое произвольное количество. Я говорю «практически любое», потому что получаемые выходы деноминированы. Но в конечном итоге вы можете начать практически с любым количеством Bitcoin, которое вы хотите получить с этими конкретными выходами. Выходы, получаемые после смешивания, деноминируются таким образом, что в итоге вы получаете один из десятков возможных видов деноминации. И всё равно для того, чтобы собрать эти транзакции воедино, требуется централизованный координатор. И такие транзакции массивны, в отличие от транзакций кошелька Samurai, «пять входов, пять выходов». Так, например, каждая транзакция может включать в себя до 150-400 входов. То есть, размер транзакций увеличивается значительно.

Но пропоненты WabiSabi говорят: «Смотрите, в каждом раунде смешивания вы получаете гораздо большую анонимную группу. Это гораздо эффективнее, чем, например, только пять выходов». И WabiSabi улучшает оригинальные стандарты смешивания Wasabi. А реализованный ими код кошелька пытается снизить некоторые риски, связанные с функциями, которые в итоге могут оказаться выстрелом в собственную ногу. Под этим я подразумеваю лучшую обработку выходов сдачи, улучшение способа передачи информации о том, какие деньги следует потратить. Противники утверждают, что этого недостаточно, но последнее программное обеспечение кошелька определённо пытается решить некоторые из этих проблем.

Затем у нас идёт JoinMarket. JoinMarket — один из тех инструментов, который определённо любят менее всего, поскольку у него самые высокие начальные требования к участникам. Поэтому JoinMarket крайне гибок. По сути, это просто одноранговая сеть поставщиков ликвидности, имеющихся в книге заявок. То есть это просто децентрализованная книга заявок. Заявители просто приходят и говорят: «Здесь у меня есть один Bitcoin ликвидности. Если вы хотите использовать мой Bitcoin в своём раунде смешивания, вы можете заплатить мне немного денег, и сделать это». И каждый поставщик ликвидности может указать конкретную цену использования своей ликвидности. На конкурентном рынке, конечно, эта услуга обойдётся совсем недорого, но на неконкурентном рынке, где такие инструменты сложны, или если люди беспокоятся о том, что их средства будут помечены, то, конечно, они оплата будет более значительной. Заявитель как бы вкладывает капитал в трудно реализуемый актив, но это очень вольное описание. Тем не менее он предоставляет свой Bitcoin в пользование и назначает соответствующую цену, а принимающая сторона, то есть тот, кто хочет принять участие в смешивании, может просто сказать: «Ага, вот список всех потенциальных поставщиков ликвидности, и я могу выбрать столько из них, сколько захочу». Вы можете выбрать пять или сто. Вы можете выбрать сколько угодно поставщиков, и все зависит от принимающей стороны, а также от кода кошелька, связанного с этой стороной, от которого уже зависит надлежащее построение транзакций, обеспечивающих хороший конечный уровень анонимности. И всё это определённо сложнее.

Программное обеспечение кошелька в этом случае использует нечто, называемое «глубиной», о чём я ещё расскажу. Но у них также имеется свой собственный механизм обеспечения «гигиены» монет, предотвращающий консолидацию входов. Пожалуй, для людей из мира Monero это требует некоторого разъяснения. Пока это ещё является проблемой для Monero, но уже в меньшей степени, поскольку адреса скрываются. Идея с консолидацией заключается в том, что вы пытаетесь сделать всё возможное для смешивания ваших средств по отдельности. То есть вы берёте средства, которые нужно смешать, совершаете все необходимые действия, а в конце просто снова собираете все эти средства в одном месте, поэтому их относительно просто отследить. И каждый подход к смешиванию должен иметь свой собственный способ решения данной проблемы.

Далее следует PayJoin. PayJoin интересен тем, что он так же интерактивен, как и другие методы смешивания, но при этом использует преимущества существующей ситуации, которая, вероятнее всего, так или иначе будет интерактивной. То есть это происходит так: «Привет, я Джастин, мне нужно оплатить покупку этого цветка». И продавец, вероятно, начнёт искать мой платёж, чтобы подписать его. Таким образом, естественным путём создаётся ситуация, подразумевающая интерактивное взаимодействие сторон. Поэтому в случае с PayJoin я как покупатель цветов не просто перевожу средства получателю, продавцу, а мы сотрудничаем, то есть и я, и продавец вместе создаём транзакцию, и тогда становится уже далеко не так явно, кто на самом деле тратит деньги. Ведь один из самых распространённых эвристических подходов к отслеживанию Bitcoin основывается на том, что расходующий средства человек всегда будет одним и тем же. А в данном случае, конечно, у нас имеются два человека, расходующих средства, даже если по сути это является переводом средств от одного человека к другому.

Самый простой способ реализовать PayJoin — включить соответствующую настройку на сервере BTCPay. Недостатком при этом является необходимость в наличии горячего кошелька. Так что в данном случае следует соблюдать осторожность и не хранить там значительных средств. PayJoin представляет собой очень простое решение для смешивания, предотвращающим возможность использования некоторых основных эвристических методов анализа, но не исключающим применения более сложных. Сторонники PayJoin утверждают, что если это решение получит широкое распространение, то это станет шагом вперёд, и хотя это решение и не идеально, оно всё же действительно будет способствовать продвижению с точки зрения обеспечения функциональности и приватности транзакций Bitcoin.

Сумма перевода может быть скрыта, но только если обе стороны будут соблюдать «гигиену» монет. Если я покупаю что-то, создавая транзакцию PayJoin, но затем использую свой кошелек таким образом, что компании, занимающиеся анализом блокчейна могут всё с лёгкостью расшифровать, то они, безусловно, смогут выяснить, с какого входа я начал и каким выходом закончил, а затем вычислить, сколько я на самом деле заплатил в соответствующей транзакции. И, конечно, эту информацию они могут использовать для вычисления получателя транзакции. Это почти как в случае с кольцом Monero, состоящим из двух входов. Ещё на раннем этапе развития Monero мы признали, что при размере кольца Monero, равном двум, один из входов транзакции будет связан с другой стороной, и, конечно же, другой вход будет связан с вами. Это не приводит к такому же эффекту цепной реакции, как в случае с кольцами Monero из двух входов, но сама идея наличия только двух вариантов предполагает, что если один из них сильно выделяется, то вы сможете вычислить второй. И эта проблема по-прежнему актуальна.

И здесь я всё собрал в одну довольно большую таблицу, и прошу прощения за то, что всю информацию пришлось вместить на одну страницу. Но вы, если захотите, сможете потом изучить её отдельно. Но здесь я хотел показать, что хорошо, что плохо и что просто ужасно в этих подходах.

Итак, Whirlpool и некоторые из связанных с ним положительных моментов. Прежде всего, это прагматичная приватность. Другими словами, сообщество хорошо разобралось с тем, какой уровень приватности действительно нужен людям, и создало относительно понятные для понимания и использования модели риска. В результате Whirlpool достаточно прост в использовании, если вы входите в экосистему. То есть если вы поддерживаете собственный Dojo-узел, используете Wasabi в качестве обычного кошелька, то Whirlpool некоторым образом способствуют пользовательскому взаимодействию, чтобы сделать процесс относительно простым и понятным. И в этом их заслуга, безусловно, велика. То есть всё относительно просто для понимания. Но всё же, в сравнении с Monero Whirlpool более сложен для понимания, но по сравнению с другими подходами к обеспечению приватности Bitcoin, это решение относительно просто.

Теперь о некоторых недостатках. Это дорого — чтобы смешать свои средства, вам придётся заплатить кому-то ещё. Опять же, как и в случае с Samurai, всё происходит медленно. Часто на смешивание уходит несколько дней, а иногда и недель, что, конечно, менее удобно, чем просто провести транзакцию Monero. Однако стоит отметить, что смешивание Bitcoin так и так связано с расходами. Но иногда дешевле смешать уже имеющийся Bitcoin, а не конвертировать его в Monero, а затем переводить обратно в Bitcoin. И это касается даже относительно небольших сумм, поскольку обычно за участие в раундах смешивания вы платите всего 0,3% или около того. И это, как правило, меньше, чем размер большинства комиссий сделок проведение пары сделок по переводу средств в Monero и обратно. Так что, несмотря на то, что затраты присутствуют, иногда это лучший и более дешёвый вариант, чем конвертация в Monero и обратно, особенно в случае с небольшими суммами. Ведь для этого требуется деноминация, что раздражает. А вся оставшаяся мелочь, которая не подходит под номиналы при входе в раунды, фактически сжигается. Доступ к ней утрачивается навсегда. Существуют планы по интеграции с этими выходами и реализации атомных свопов с Monero, но пока что это не сделано. Таким образом, на входе вы всё же потеряете некоторую часть своих средств.

А теперь об ужасном. Прежде всего, это централизованная система. Она опирается на центрального координатора. Он не может забрать ваши средства, но... Ребята из Samurai, конечно, с этим не согласятся, но такой координатор определённо становится целью для правоохранительных органов, которые попытаются пресечь такой вид смешивания. Это централизованная точка, необходимая организации операций смешивания. Поэтому я не удивлюсь, если такой координатор станет мишенью. Кроме того, по умолчанию, если вы используете кошелёк Samurai, лёгкую версию, ваш расширенный публичный ключ xpub, раскрывающий все адреса, связанные с кошельком, отправляется на соответствующий сервер, где сохраняется. Поэтому вы должны быть уверены, что за вашим кошельком не следят, потому что по умолчанию это вполне возможно. Этого можно избежать, запустив собственный Dojo-узел. И это определённо следует делать, поскольку использование инструмента смешивания, где приходится сообщать кому-то все свои адреса, на мой взгляд, не имеет смысла. Так что, смею утверждать, что поддержка собственного Dojo-узла в этом случае просто необходима.

Переходим к WabiSabi. Из положительных моментов стоит отметить большую гибкость некоторых опций CoinJoin. Теперь эта функция реализована на BTCPay Server в бета-версии. Так что, опять же, если у вас есть горячий кошелёк на BTCPay Server, вы можете настроить несколько опций для регулярного смешивания средств и там тоже.

Недостатки: размер комиссий, низкая скорость, и прочие вещи, аналогичные Samurai. Как и в случае с Samurai транзакции отслеживаются в блокчейне — это огромные транзакции, которые выделяются и отличаются от обычных платежей. А варианты смешивания с рядом разрешений требуют особой осторожности, поскольку предполагают наличие больших возможностей, и нужно быть очень внимательным и понимать, как работает программное обеспечение кошелька. И если вы не знаете, что делаете, будьте предельно осторожны и надлежащим образом контролируйте свои монеты.

И немного ужасного. Как для Monero, так и для Bitcoin, стал новостью тот факт, что координатор использует инструменты оценки рисков, связанных с блокчейном, в частности Chainalysis. Как сообщается, для того, чтобы не допустить использования определённого типа средств в раундах смешивания. Это не только отваживает некоторых пользователей, но, опять же, является точкой централизации. Подобные меры, связанные с давлением, меня не удивляют. А вот вопрос сдачи по-прежнему остаётся нерешённым. Так что и со сдачей необходимо соблюдать крайнюю осторожность. В этом отношении уже выдвигались некоторые предложения, и одна из рекомендаций, например, сводилась к следующему: «Ну, просто не пользуйтесь ей». Но как-то выделить сдачу будет трудно.

JoinMarket — о нём я знаю меньше, но всё считаю нужным упомянуть. Некоторые из преимуществ в данном случае заключаются в том, что у JoinMarket нет центрального координатора, и подход обладает огромной гибкостью для тех, кто действительно знает, что делает. И хорошо, что у поставщиков ликвидности есть прямой стимул. В случае с Samurai, например, повторное смешивание бесплатно, поэтому имеется небольшой стимул для соблюдения приватности, возможно, чтобы продолжать смешивание. Но в итоге вы всё равно на какое-то время блокируете кучу реальных денег, а блокировка денег влечёт себя расходы, связанные с упущенной выгодой. И тот факт, что вы могли бы использовать свои деньги для обеспечения ликвидности на JoinMarket, безусловно, интересен и обеспечивает преимущество в сравнении с другими подходами.

Некоторые из плохих моментов будут теми же, что и у других решений, но я бы добавил, что это более сложный и более сложный по сравнению с другими вариантами подход. Но самое ужасное заключается в том, что предлагаемый в этом случае инструментарий хуже. У них даже нет веб-сайта. Были предприняты некоторые попытки создания лучшего инструментария, но это происходит медленно и требует более сложной конфигурации и настройки узла и более высоких требований к участникам. Вы не сможете воспользоваться JoinMarket и WabiSabi с помощью телефона, например, из-за более высокого уровня предъявляемых к приватности требований.

PayJoin, опять же, прост в использовании. Прилагается много усилий, чтобы сделать его предельно простым в использовании. Так что если вы ещё не пользовались PayJoin, рекомендую попробовать. В сравнении со многими другими вариантами UX действительно довольно хорош. Но плохо то, что всё ещё приходится полагаться на то, что контрагент имеет некоторое представление о том, как используется его Bitcoin. Поэтому не стал бы утверждать, что этот метод смешивания действительно значительно способствует обеспечению приватности. Если вы ищете способ, гарантирующий приватность графа транзакций ваших Bitcoin, я бы не стал полагаться на PayJoin. PayJoin — это просто забавная игрушка для вас и продавца, также использующего её, но не полноценный инструмент. Однако, если говорить только о сети Bitcoin, то PayJoin в целом потенциально может обеспечить более высокий уровень приватности при смешивании.

Кроме того, существует возможность делегировать часть обязанностей по координации третьей стороне. Скажем, если вы являетесь получателем и не управляете сервером, сами не поддерживаете BTCPay Server, но хотите получать регулярные пожертвования, вы можете делегировать процесс отслеживания входящих платежей серверу, что, вероятно, имеет некоторые преимущества, если вы действительно хотите заниматься этим. Но, конечно, это даже не близко к простому размещению статического адреса Monero для сбора пожертвований.

И ещё немного о Monero для сравнения. Одним из огромных преимуществ Monero является отсутствие интерактивности. Хочу подчеркнуть это — чтобы провести транзакцию Monero, вам не приходится взаимодействовать с кем-либо ещё. Вы можете сделать это совершенно автономно. Вы можете использовать выходы с произвольным номиналом. Вам не нужно разбивать их на части. Вам не приходится беспокоиться о суммах. Конечно же — RingCT. И это быстро. Вам не придётся ждать несколько дней или недель, чтобы получить средства. Они переводятся очень, очень быстро. И даже несмотря на то, что конвертация в Monero и обратно обходится относительно дорого, скорость — это преимущество, с которым не могут конкурировать инструменты для смешивания, если вас заботит приватность, само собой.

Среди плохих сторон, вероятно, стоит упомянуть неэффективность, необходимость в частом «вспенивании» аналогичных приватных групп, как если бы вам пришлось провести несколько раундов смешивания. Но если вы принадлежите к тому типу людей, которые готовы провести целый ряд раундов смешивания Bitcoin для достижения необходимого уровня энтропии, то вы точно так же проведёте подряд множество транзакций Monero.

Ужасная сторона состоит в том, что всё это имеет мало общего с настройками, используемыми по умолчанию, с правилами консенсуса Monero, используемыми по умолчанию и направленными против целенаправленного наблюдения со стороны контрагентов, с которыми вы взаимодействуете. Если вас интересует эта проблема, она хорошо освещена в Breaking Monero, «Взламывая Monero».

И теперь перейдём к скрытым адресам. Посмотрим, что у нас со временем. Всё отлично. Итак, BIP-47. Сообщество Samurai Wallet любит BIP-47. Совсем недавно протокол распространился за пределы тесного сообщества Samurai, которое было единственным, кто использовал его в течение многих и многих лет. Теперь он реализован и некоторыми другими кошельками. Но я бы однозначно воспринимал каждое их заявление в отношении скрытых адресов с большой долей скепсиса, поскольку у BIP-47 имеются существенные недостатки. Итак, если бы вы захотели ухудшить скрытые адреса Monero, допустив повторное использование публичных адресов, то BIP-47 стал бы для вас идеальным решением.

Итак, некоторые из основных недостатков. Первое — протокол требует так называемой «транзакции уведомления». Если вы используете Samurai, там есть кнопка подключения, которую нужно нажать. Это требует совершения платежа на статический Bitcoin-адрес в блокчейне, и этот адрес повторно используется всеми остальными подключившимися. Таким образом, мы изначально находимся в довольно плохой отправной точке. Эта схема предназначена для лёгких клиентов. Причина, по которой Samurai Wallet вместо других способов реализует именно эту функцию, заключается в том, что она не требует большого объёма сканирования на мобильном устройстве и идеально подходит для лёгкой реализации. Таким образом, одним из главных преимуществ BIP-47 является то, что он не требует поддержки полного узла и передачи гигабайтов данных для того, чтобы выяснить, какие транзакции связаны с вами. Правда, протокол следует использовать с осторожностью, поскольку адреса уведомлений используются повторно.

Поэтому, если вы говорите нескольким контрагентам, что они могут подключиться к вам и совершать платежи, то следует быть предельно внимательным ко всем метаданным, связанным с синхронизацией всех их графов транзакций и используемым для построения транзакции уведомления и всякой прочей ерунде, содержащейся там. Это обеспечивает некоторые свойства, схожие со свойствами скрытых адресов, в том смысле, что после подключения отправитель может получить новый адрес, необходимый для проведения платежей на ваш адрес без лишнего взаимодействия при совершении дополнительных трат. То есть для получения каждого нового адреса не требуется никакого взаимодействия. И, я уверен, и все вы видели это в Twitter, это позволяет вам с помощью PayNym «прогибать» некоторых нормальных пользователей, потому что картинка профиля как бы генерируется в автоматическом режиме за них. Так что, если вы видите, что у кого-то в профиле стоит PayNym, значит, этот пользователь определённо заботятся о своей приватности, и он лучше вас во всех отношениях.

В Samurai есть ещё один ужасный момент. Да, для использования BIP-47 не требуется никакого централизованного сервера, но в кошельке Samurai активно используется собственный централизованный сервер, необходимый для присвоения очень длинным кодам платежей с очень коротких кодов, которые смог бы прочитать обычный человек. И если бы я, например, захотел, CakeIsGreat420 стал моим адресом BIP-47, не уверен, что это будет разрешено, но что-то вроде этого будет создано вместо длинного кода. Вот для того, чтобы объединить их, и требуется централизованный сервер.

Теоретически, вы можете использовать что-то вроде OpenAlias. Вы можете взять длинную строку и записать её как свой OpenAlias, как и в случае с BIP-47. И люди смогут подключаться с помощью обычного DNS, что, на мой взгляд, более элегантное решение, чем использование централизованного сервера с базой данных. Но, насколько мне известно, ничего подобного пока не реализовано.

«Тихие» или «бесшумные» платежи. Это новая горячая, всеми обсуждаемая тема. Если поговорить с людьми, занимающимися вопросами приватности Bitcoin, разговор, вероятно, коснётся этой темы. Тихие платежи более схожи со скрытыми адресами Monero. Они дают гораздо больше преимуществ, чем BIP-47, но это делается в ущерб эффективности. Вот почему эта тема так активно муссируется. Тихие платежи требуют использования Taproot. Это автоматически исключает возможность их реализации с любым кошельком, не поддерживающим Taproot. Так что, в этом случае стоит оставаться в курсе последних новостей Bitcoin.

Основное преимущество тихих платежей заключается в отсутствии необходимости в транзакции уведомления, что уже делает их намного лучше. В этом смысле используемый адрес отсутствует, и ваша транзакция не выделяется, как в случае с транзакцией уведомления BIP-47. Она сразу бросается в глаза. Её легко распознать — любой может её увидеть. Но в случае с тихими платежами всё гораздо сложнее. Не хочу сказать, что это невозможно, поскольку не настолько глубоко исследовал этот механизм. Но точно знаю, что это сложнее. Получатель публикует свой адрес для совершения тихого платежа, а другая сторона может легко генерировать новые адреса для оплаты.

Но и тут возможны самые непредсказуемые сценарии. Следует помнить о том, что тихие платежи — это просто компонент скрытых адресов. Они не обеспечивают никакой приватности графов транзакций. Поэтому те, кто пытается интегрировать механизмы, подобные тихим платежам, с подобным CoinJoin подходом, сталкиваются со всяческими курьёзными проблемами. Например, вам приходится совместно с другими участниками создавать CoinJoin, но эти люди также должны использовать механизм тихих платежей, если вы не готовы к дополнительным раундам вычислений. В этом случае у вас всё равно всё получится, но только если у вы полностью контролируете выход. Например, вы не сможете вывести средства с биржи и затем использовать тихий платёж в CoinJoin. Не факт, что вам это понадобится, но всё же это некоторое препятствие. Таким образом, тихие платежи определённо сложнее с точки зрения нишевых вопросов, связанных с приватностью. Но в целом их меньше, чем в случае с BIP-47. Все эти проблемы — просто проблемы реализации.

И ещё одна сравнительная таблица. BIP-47 PayNym. Это один из лучших вариантов. Это, безусловно, наиболее широко распространённый вариант реализации скрытых адресов в Bitcoin. Сейчас это, по сути, единственный из доступных механизмов. И если вы хотите неинтерактивно принимать платежи Bitcoin, и вам нужно, чтобы они каждый раз направлялись на новый адрес, на данный момент BIP-47 — единственный реальный вариант. Поэтому вам придётся понять и принять неизбежность транзакций уведомления и все потенциальные недостатки, связанные с приватностью.

Из плохого, безусловно, остаются транзакции уведомления, тенденция к использованию централизованного сервера имён. Опять же, это не обязательно, но всё же он используется довольно часто. И самое неприятное — это повторное использование адреса уведомления, что очень и очень плохо, поскольку, прежде чем кто-то сможет «приватно» перевести вам средства, вам придётся предупредить этого человека, что он раскрывает используемый адрес и делает это крайне публично. Так что в данном случае следует соблюдать предельную осторожность.

А ещё у нас есть тихие платежи, на которые я смотрю с оптимизмом. Но они не работают с реализацией Samurai. И они не собираются реализовывать этот механизм. Они сами так сказали, поскольку это потребует запуска полного узла, например, или выполнения каких-то подобных требований. В данном случае транзакций уведомления отсутствуют, что замечательно, но это требует неэффективного сканирования клиентов. Примерно как это происходит в Monero, где нужно проверять каждый выход, чтобы убедиться, что он предназначен для вас. Мы в пространстве Monero хорошо знакомы с этим, и очевидно, что это очень неэффективно. Приходится тратить время на синхронизацию, но в конечном счёте это компромисс, который необходим для использования скрытых адресов. И такой же компромисс необходим для реализации тихих платежей. И я уже упомянул об этом как о недостатке, когда говорил об объединении тихих платежей с CoinJoin. На данный момент я бы рекомендовал тем, кто только присматривается ко всему этому, просто задуматься об использовании CoinJoin до и после проведения любого платежа с контрагентом с помощью WabiSabi, Samurai или JointMarket, а затем просто изолировать платёж, проведённый контрагенту, с помощью механизма тихих платежей и рассматривать его как нечто совершенно отдельное.

А что касается Monero, особенно в части скрытых адресов, то они работают просто великолепно, верно? Вы отправляете кому-то адрес, и каждый раз, когда этот кто-то проводит на него платёж, он каждый раз фиксируется в блокчейне по-разному. Вам не приходится беспокоиться об итерациях, сканировании, создании холодного кошелька. Всё это более или менее полной мере решается за вас, что очень здорово. Недостатком, конечно, является необходимость в неэффективном сканировании, когда у вас есть X блоков, оставшихся сверх тех, что были учтены вашим кошельком. Этого никак не обойти —это просто неотъемлемый недостаток общего подхода к скрытым адресам.

И я кратко проясню всё для тех, кто думает: «Ну хорошо, у Monero есть эти скрытые адреса. Но ведь Bitcoin использует обычные адреса, которые публикуются в открытую. Так что же тогда означают скрытые адреса в Bitcoin?» Ну, по сути, это просто более простой способ сгенерировать новый адрес Bitcoin, который затем раскрывается публично. Таким образом, это более простой способ избежать повторного использования адресов Bitcoin. Применительно к Bitcoin в основном мы говорим о скрытых адресах в данном контексте. На самом деле это просто даёт уверенность в том, что мы всегда используем новый, свежий адрес без какой-либо необходимости интерактивно сообщать об этом двум или, возможно, большему количеству контрагентов, участвующих в транзакции.

Теперь определённо нужно сказать пару слов о Lightning, потому что Lightning широко обсуждается сообществом Bitcoin. Мне не хотелось особо распространяться на тему Lightning, но я считаю необходимым рассказать о некоторых наиболее важных, на мой взгляд, моментах, касающихся приватности Bitcoin и приватности Lightning.

Прежде всего, необходимо понимать, что свойства приватности Bitcoin Lightning очень сложно передать. Крайне сложно объяснить людям и заставить кого-то принять лучшие методы обеспечения приватности Lightning. Абсолютно точно, как и в случае со смешиванием Bitcoin, вы можете использовать Lightning. Если делать это очень осторожно и внимательно следить за тем, с кем вы открываете каналы, за типами платежей и способами их осуществления, то потенциально Lightning обладает по-настоящему потрясающими приватными свойствами. Но только в том случае, если использовать Lightning, уделяя особое внимание всем исследованиям, проводимым для обеспечения максимально возможной приватности платежей Lightning.

И наоборот, Lightning можно реализовать очень, очень и очень плохо. И поэтому я считаю важным отметить, что, когда мы говорим о Lightning как о решении для обеспечения приватности, на мой взгляд, не стоит даже пытаться использовать Bitcoin Lightning в этих целях, если вы не достаточно хорошо знакомы и не вполне компетентны в вопросах приватности первого уровня Bitcoin. Например, если вы не знаете, как осуществляется смешивание, как пользоваться PayJoin и так далее. Если вы не достигли этого уровня, то вам не стоит даже смотреть в сторону обеспечения приватности с помощью Bitcoin Lightning. На практике, чтобы создавать и настраивать каналы Lightning вам понадобится проводить платежи в блокчейне. Поэтому вам необходимо понимать, какие риски для обычных транзакций Bitcoin несёт в себе вся эта история с Lightning. Мы не можем просто пройти мимо этого, поскольку это строгие требования к проведению приватных платежей Lightning. И поэтому вы должны изначально знать об обеспечении приватности на первом уровне Bitcoin.

Кроме того, следует помнить о том, что многие пользователи кошельков, поддерживающих Bitcoin Lightning, большинство из них, использует кастодиальные решения. И, конечно же, с помощью кастодиального решения вы не достигните хоть сколько-нибудь значимого уровня приватности. И это также следует иметь в виду, рекомендуя людям воспользоваться приватными свойствами Lightning. Если они делают выбор в пользу кастодиального решения Bitcoin Lightning, полагая что, что оно обеспечит их приватность, то их положение будет значительно хуже, чем если бы они использовали любое другое решение, не связанное с кастодиальным хранением.

Помимо прочего, Lightning по своей сути является маршрутизируемой сетью, верно? Вы открываете каналы с узлами, и, что вполне логично, люди хотят, чтобы каналы были эффективны. Для открытия и управления этими каналами требуется наличие реальных Bitcoin. Поэтому, как правило, в сети Lightning люди открывают относительно небольшое количество каналов с относительно крупными узлами, с которыми связан большой объём ликвидности. Это приводит к тому, что в результате появляются по-настоящему крупные рабочие узлы. Например, некоторые из крупнейших узлов в сети Lightning, обладающие самой высокой ликвидностью, связаны, например, с кастодиальными кошельками. Поэтому при взаимодействии со всеми этими узлами следует соблюдать особую осторожность. Необходимо внимательно следить за тем, какую информацию вы им раскрываете. И, безусловно, нужно подключаться только к исключительно надёжным узлам Bitcoin Lightning, что, конечно, легче сказать, чем сделать. Лично я не готов доверять решение вопроса моей собственной приватности кому-то другому.

И это также представляет собой потенциальный риск. Я не говорю, что люди уже делают это, но риск есть, поскольку существуют крупные игроки с большим объёмом ликвидности со своими узлами Lightning, и потенциально они смогут продавать полученные данные Chainalysis. И нет реального способа узнать, делают они это или нет. И это всего лишь одна из областей давления для регуляторов, которые будут иметь своё понимание того, что часто продаётся в этой «суперприватной» системе. Но я не хочу тратить время исключительно на Lightning. Я просто хотел поделиться с вами мыслями относительно невероятной сложности подходов к обеспечению приватности с помощью Lightning в Bitcoin.

Существуют ресурсы, посвящённые вопросам приватности Bitcoin Lightning. В числе прочего с помощью Magic Grants мы помогли в финансировании документации по этой теме. Так что если вы просто наберёте в поисковике «приватность Bitcoin Lightning», то найдёте статьи, содержащие информацию к размышлению. Но я считаю, что на данный момент проблема UX не решена. Поэтому будьте осторожны, используя Lightning в целях обеспечения приватности.

Теперь давайте немного сравним анатомию транзакций Bitcoin и Monero. Граф транзакций скрывает, из какого источника тратятся средства. В случае с Monero у нас имеется протокол RingCT, обеспечивающий надёжную защиту среды. Он действительно гарантирует защиту от массовой слежки, от тех, кто в целом пытается выяснить, как перемещаются средства. Но этот протокол слабо защищает от целенаправленной слежки со стороны контрагентов. Опять же, смотрите «Взламывая Monero».

Сумма. Monero отлично скрывает сумму с помощью RingCT. Просто потрясающе делает это. Пять звёзд. Идеально.

Адреса, скрытые адреса. И сова всё просто потрясающе, по сути, идеально. Но приходится идти на компромисс с эффективностью, однако Monero более или менее отлично справляется с двумя последними проблемами, да и с первой тоже.

Теперь переходим к Bitcoin. И первое — граф транзакций. Чтобы защитить граф транзакций, скрыть сумму, вы прибегаете к подобным CoinJoin подходам. Это сложно, потому что суммы всегда публичны. Как правило, выбирается путь деноминации, чтобы особым образом распорядиться сдачей с выходами, полученными после смешивания, и всё становится ещё сложнее. Так что идеального решения нет, потому что нет способа скрыть суммы. Но вы можете попытаться сделать их «неоднозначными» с помощью таких решений, как PayJoin, где суммы становятся нечёткими. Сколько на самом деле потрачено, зависит, конечно, от суммы входов. И вы можете попытаться использовать потраченные после смешивания выходы, близкие к номинальным значениям. Вы не потеряете слишком много. И тогда, думаю, вы либо выбросите оставшийся выход сдачи, либо сделаете что-то другое.

Что касается адресов. У нас есть тихие платежи, которые при надлежащей реализации обеспечивают довольно хорошую защиту. Далее у нас есть BIP-47, который я в целом не рекомендую использовать. Я бы сказал, что здесь необходим способ неинтерактивного приёма платежей, чтобы он был практичным, что сейчас и делается. Но если вы хотите разместить статический адрес, я настоятельно рекомендую просто разместить адрес Monero, а затем, если вам нужен Bitcoin, конвертировать полученные Monero в Bitcoin. Кроме того существует ручной обмен свежими адресами Bitcoin, который, конечно, подразумевает наличие возможных ошибок, связанных с опытом пользовательского взаимодействия. Но в конечном итоге это один из лучших имеющихся вариантов.

Итак, подводя итоги. Начать можно с того, чтобы взять имеющиеся у вас средства и пропустить их через какой-нибудь CoinJoin-миксер, такой как Samurai, WabiSabi или JoinMarket. В отношении того, что лучше, существуют самые разные мнения, и я советую аккуратно относиться к тому, что говорится обо всех этих методах. Используйте разумные настройки, заданные по умолчанию многими существующими кошельками, например, Wasabi Wallet. Не отправляйте средства, если вам говорят: «Это небезопасно» или «Отправка не будет приватной. Вы всё равно хотите отправить средства?» Не отвечайте «да».

И, по крайней мере, пока что я не рекомендовал бы новичкам использовать JoinMarket. А когда вы начнёте проводить платежи контрагентам, используйте PayJoin там, где он поддерживается. Многие реализации BTCPay Server используют PayJoin. Но имейте в виду, что если они сразу продают свои монеты за доллары, то, скорее всего, с их стороны всё будет отслеживаться. Поэтому использование PayJoin не принесёт никакой ощутимой пользы. Вы можете попробовать тихие платежи, но сейчас ни почти нигде не поддерживаются. И я определённо рекомендую, особенно при наличии действительно острой необходимости в приватности, производить смешивание до и после каждого взаимодействия с контрагентом, что более или менее похоже на то, что вы делаете в случае с транзакциями Monero, где каждый раз используется новая кольцевая подпись. Вы не создаёте кольцевую подпись единожды, а затем с её помощью проводите кучу платежей, и только после создаёте ещё одну. Кольцевые подписи создаются на всех этапах. Так и в случае с Bitcoin следует использовать смешивание на каждом этапе.

А для приёма платежей я, несмотря на возможные проблемы с UX, всё так же рекомендую вручную делиться новыми адресами Bitcoin. Просто будьте осторожны. Вы также можете реализовать поддержку PayJoin, но я рекомендую делать это только в том случае, если вы со своей стороны соблюдаете надлежащую гигиену монет. В противном случае в этом просто нет смысла. На мой взгляд, ни вы, ни отправитель не получат никаких преимуществ. И если вам действительно необходимо принимать платежи неинтерактивно, я вновь настоятельно рекомендую просто опубликовать адрес Monero, а позже конвертировать полученные монеты в Bitcoin, если вам он действительно нужен.

Bitcoin можно использовать с теми же преимуществами приватности, что и Monero. Все мы это знаем. Это было описано много раз, но при этом приходится быть очень и очень осторожным. Существуют инструменты, которые определённо помогают в этом, но опыт пользовательского взаимодействия при этом очень далёк от Monero. Чтобы обеспечить приватность графа транзакций, вам приходится платить третьей стороне. Вам приходится ждать несколько дней или недель. А это совсем не то же самое, как если бы вы просто нажали кнопку «Отправить» в кошельке Monero.

И одного инструмента, как правило, недостаточно. Требуется объединение сразу нескольких. Например, Samurai Wallet предлагает целый набор инструментов, а не только Whirlpool для обработки сдачи, для проведения платежей. Они используют целый ряд забавных названий. Stowaway и Stowaway 2X, например. Я считаю, что интерактивность и продолжительность, то есть длительность процесса, остаются двумя самыми слабыми местами ведущих сервисов для смешивания Bitcoin. Централизация также зачастую является потенциальным риском. И я никогда не рекомендую широкой аудитории какой-либо конкретный инструмент для обеспечения приватности Bitcoin, потому что опасаюсь, что в конечном счёте всё может пойти не так. Думаю, вероятность столкнуться с проблемами выше, чем получить какие-то преимущества.

И если вы просто рядовой пользователь, то, на мой взгляд, для обеспечения приватности вам всё же стоит использовать Monero. А если вам нужно совершать платежи в Bitcoin, то вам следует просто время от времени переходить на Bitcoin конкретно в случае с теми платежами, которые вы не можете совершить в Monero. Но если вы действительно знаете человека, который сидит и планирует, как будет использовать все свои выходы Bitcoin, и прочие подобные вещи, вы определённо можете использовать Monero на таком уровне сложности с помощь таких кошельков, как Feather. Но большинству людей этого, как правило, не требуется. Так что, поскольку в сравнении с Monero в отношении приватности Bitcoin требует большего, я не рекомендую эти подходы людям.

И, наконец, на мой взгляд, самое главное — это взаимозаменяемость. Даже при наличии всех этих подходов к обеспечению приватности, Bitcoin, как мне кажется, практически никак не продвинулся с точки зрения взаимозаменяемости. Компании, занимающиеся анализом блокчейна, оценивают степень риска определённых адресов. Целым пулам смешивания и транзакциям присваивается повышенная степень риска, и эта информация доводится до пользователей. Каждый выход, побывавший когда-либо в Wasabi, может попасть в чей-то список. Так что подобные подходы к обеспечению приватности Bitcoin, на мой взгляд, не решают проблемы взаимозаменяемости. И поэтому, если вас беспокоит то, как вы используете ваши средства, если вы не хотите, чтобы они были помечены как потенциально рискованные, я утверждаю, что механизмы обеспечения приватности Bitcoin не решают ни одной из этих проблем. Да, они позволяют сделать так, чтобы после смешивания украденные деньги из даркнета считались менее рискованными, но они однозначно не будут выглядеть так, как абсолютно новый Bitcoin.

Так что если вы собираетесь пойти по пути обеспечения приватности Bitcoin, вам придётся иметь дело с централизованными сервисами, которые, вероятно, будут задавать всевозможные вопросы. Им захочется узнать, почему вы выбрали этот сервис? Почему вы готовы заплатить за то, что кто-то повысит приватность ваших транзакций Bitcoin, если вам нечего скрывать? Независимо от того, верен этот аргумент или нет, он и дальше будет приводиться специалистами по соблюдению нормативных требований и представителями бирж. Так что в случае с Monero у нас есть отличный пример, позволяющий сказать: «Этот человек владеет Monero, просто потому, что это единственная монета, которую можно добыть с помощью процессора. При этом его даже может не волновать проблема приватности». Верно? Но вы не можете сказать того же в случае с применением подходов к смешиванию Bitcoin, потому что это просто не одно и то же.

Не думаю, что у меня осталось время на вопросы. Поэтому, чтобы не терять времени, я пропущу эту часть, но вы можете связаться со мной следующим образом. Меня зовут Джастин, я из команды Cake Wallet. Так что если у вас возникнут какие-либо проблемы с Cake Wallet, вы можете обратиться ко мне. Но наша цель состоит в том, чтобы сделать все эти вещи максимально простыми в использовании. Поэтому, когда люди спрашивают: «Почему вы не реализовали, например, BIP-47?» Ну, на то есть масса причин, упомянутых мной ранее, верно? Так что работа продолжается. Не всё идёт идеально, но приватность — это сложная проблема правильной реализации UX. И это то, над чем мы работаем в Bitcoin и Monero изо дня в день. Спасибо за внимание.

_[Реклама]_

_Вы любите кофе и Monero так же сильно, как и мы? А вам не хотелось бы начинать каждый свой день с чашки Gratuitas? Покупайте зёрна премиум-класса за Monero, и если вам придётся по душе их вкус, поделитесь цифровыми чаевыми напрямую с гватемальскими фермерами, которые позаботились о вас. Ваша поддержка способствует развитию нашего предприятия. Gratuitas и Monero._

_**Даг:**_ Отлично. Джейсон, мы готовы к следующему выступлению? Джастин, пока мы успеем ответить на один или пару вопросов. Один или два вопроса. У кого есть вопросы? Кто-нибудь желает задать вопрос?

_**Вопрос:**_ Ты упомянул о том, что для обеспечения дополнительной приватности в Monero можно использовать вспенивание. Какие наилучшие методы вспенивания существуют? То есть, делаете ли вы это, например, со всеми своими Monero? Делаете ли вы это сразу или распределяете по времени? И сколько раз вы это делаете?

_**Джастин:**_ Отличный вопрос. Как вы производите вспенивание? Я бы сказал, что самый строгий способ, самый лучший способ вспенивания — это по возможности вспенивание каждого выхода по отдельности. Но это не обязательно. Допустим, вы всегда получаете деньги от одного и того же человека, и тогда вам не нужно вспенивать каждый отдельный выход. Когда вы получаете средства, они разделяются в зависимости от контрагентов, от которых вы их получаете. Так что если вы получаете средства от трёх разных людей, следует вспенивать суммы, полученные от каждого из этих трёх лиц, в их собственных группах.

Что касается сроков и прочего, то да, вспенивание иногда осуществляется довольно плохо, в результате чего происходит раскрытие метаданных, в частности, сроков. Поэтому я бы посоветовал начать с тех же подходов, что используются при смешивании в Samurai, потому что они предполагают наличие набора собственных способов, позволяющих избежать раскрытия метаданных при проведении раундов смешивания. Просто посмотрите, как это происходит, и попытайтесь повторить. И, честно говоря, это неплохая тема для обсуждения участниками Исследовательской лаборатории Monero, чтобы они тоже увидели это и сказали: «Ага, вот что происходит в раундах смешивания в Samurai. А не взять ли нам этот способ в качестве отправной точки для вспенивания? Может, мы можем создать какую-нибудь свою версию этого?» Но на самом деле не существует каких-либо хороших руководств или рекомендаций, или вообще каких-либо инструментов, которые бы автоматически производили вспенивание или что-то подобное. Потому что a) как правило, это нишевый вариант использования, и б) я даже не знаю, захотят ли люди в принципе рассказывать, что они делают.

Спасибо за внимание.
